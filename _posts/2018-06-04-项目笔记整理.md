---
layout:     post                   
title:     项目笔记          
subtitle:    学习笔记、E3商城项目笔记
date:       2018-05-29            
author:     x3408                    
header-img: img/post-bg-2015.jpg    
catalog: true                      
tags:  
    - note
---

## 项目构建

1.使用Maven构建项目

* IDEA创建项目在parent上一层应该创建一个根目录文件夹
* pom文件参考仓库代码(注意指定父模块)

2.在web模块中main文件夹下创建webapp作为web入口
3.配置欢迎页并测试

## SSM框架整合
1.创建数据库并导入数据(数据文件见项目仓库)
2.使用MyBatis的逆向工程生成pojo,mapper接口及映射文件
3.将生成的文件放在dao模块下
4.在web模块下,创建SqlMapConfig文件
5.创建applicationContext文件(包括dao,service以及trans)
6.创建springmvc文件
7.配置web.xml
8.整合测试
``` java
@Service
public class ItemServiceImpl implements ItemService {

	@Autowired
	private TbItemMapper itemMapper;
	
	@Override
	public TbItem getItemById(long id) {
		TbItem item = itemMapper.selectByPrimaryKey(id);
		return item;
	}

}
```
``` java
@Controller
public class ItemController {

	@Autowired
	private ItemService itemService;
	
	@RequestMapping("/item/{itemId}")
	@ResponseBody
	private TbItem getItemById(@PathVariable Long itemId) {
		TbItem tbItem = itemService.getItemById(itemId);
		return tbItem;
	}
}
```
* 此时会发生异常(原因是mapper映射文件没有作为配置文件而没有被扫描)
* 则应该在dao模块中的pom文件中添加如下配置

``` xml
<!-- 如果不添加此节点mybatis的mapper.xml文件都会被漏掉。 -->
	<build>
		<resources>
            <resource>
                <directory>src/main/java</directory>
                <includes>
                    <include>**/*.properties</include>
                    <include>**/*.xml</include>
                </includes>
                <filtering>false</filtering>
            </resource>
        </resources>
	</build>
```

## 改造为SOA架构

SOA架构则表现层与服务层不在一个模块中
系统之间需要使用dubbo通信（dubbo简单理解为服务的发布和使用的管理中心）
	
![架构图](https://x3408.oss-cn-hangzhou.aliyuncs.com/1528796343654.png)

节点角色说明：
* Provider: 暴露服务的服务提供方。
* Consumer: 调用远程服务的服务消费方。
* Registry: 服务注册与发现的注册中心。
* Monitor: 统计服务的调用次调和调用时间的监控中心。
* Container: 服务运行容器。

首先将表现层（web层）工程独立出来，则service模块打包方式改为war，在service工程中添加
